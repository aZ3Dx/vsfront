---
import Gallery from '@/components/Gallery.astro';
import { SERVICES } from '@/consts/services';
import { SITE_CONFIG } from '@/consts/siteConfig';
import Layout from '@/layouts/Layout.astro';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async () => {
  return SERVICES.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}) satisfies GetStaticPaths;

const { service } = Astro.props;

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'Inicio', item: SITE_CONFIG.url },
    { '@type': 'ListItem', position: 2, name: 'Servicios', item: `${SITE_CONFIG.url}/servicios` },
    { '@type': 'ListItem', position: 3, name: service.name, item: `${SITE_CONFIG.url}/servicios/${service.slug}` },
    { '@type': 'ListItem', position: 4, name: 'Portafolio', item: `${SITE_CONFIG.url}/servicios/${service.slug}/portafolio` },
  ],
};
---

<Layout
  title={`Portafolio de ${service.name}`}
  description={service.portfolioDescription}
  jsonLd={breadcrumbSchema}
>
  <main class="pt-20 lg:pt-30">
    <section class="bg-beige1 px-4 py-8">
      <h1 class="mb-4 text-center text-2xl font-semibold lg:text-4xl">Portafolio</h1>
      <h2 class="mb-2 text-center text-xl font-semibold">{service.name}</h2>
      <p class="text-center text-lg text-balance">{service.portfolioDescription}</p>
    </section>
    <section class="px-6 py-10">
      <Gallery mediaFiles={service.allMediaFiles} />
    </section>
  </main>
</Layout>
