---
import { CLIENTS } from '@/consts/clients';
---

<section class="py-10">
  <h3 class="mb-6 bg-midnight py-6 text-center text-xl font-bold text-white lg:text-4xl">
    CONFIARON EN NOSOTROS
  </h3>
  <div class="embla clients-carousel">
    <div class="embla__container">
      {
        CLIENTS.map((client) => (
          <div class="embla__slide my-auto shrink-0 px-4">
            <img
              src={`${client.image.url}.webp`}
              alt={client.image.alt}
              loading="lazy"
              class="h-auto w-24 2xl:w-32"
            />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style scoped>
  .embla {
    overflow: hidden;
  }
  .embla__container {
    display: flex;
    user-select: none;
  }
  .embla__slide {
    flex: 0 0 20%;
    min-width: 0;
    display: flex;
    justify-content: center;
  }

  @media (min-width: 1024px) {
    .embla__slide {
      flex: 0 0 14%;
    }
  }

  @media (min-width: 1280px) {
    .embla__slide {
      flex: 0 0 12%;
    }
  }

  @media (min-width: 1536px) {
    .embla__slide {
      flex: 0 0 12%;
    }
  }
</style>

<script>
  import type { EmblaOptionsType, EmblaPluginType } from 'embla-carousel';
  import EmblaCarousel from 'embla-carousel';
  import AutoScroll from 'embla-carousel-auto-scroll';

  const $emblaNode = document.querySelector('.clients-carousel') as HTMLDivElement;
  const plugins: EmblaPluginType[] = [
    AutoScroll({
      stopOnInteraction: false,
      stopOnMouseEnter: false,
      stopOnFocusIn: false,
      speed: 0.8,
      breakpoints: {
        '(min-width: 1024px)': { speed: 1 },
      },
    }),
  ];
  const options: EmblaOptionsType = {
    loop: true,
  };

  const emblaApi = EmblaCarousel($emblaNode, options, plugins);
</script>
