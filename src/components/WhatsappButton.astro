---
import WhatsappIcon from '@/assets/svgs/WhatsApp.svg';
import { SOCIAL_MEDIAS } from '@/consts/socialMedias';
---

<a
  href={SOCIAL_MEDIAS.WhatsApp.link}
  target="_blank"
  rel="noopener noreferrer"
  aria-label="Contáctanos por WhatsApp"
  class="whatsapp-float"
>
  <WhatsappIcon class="icon" />
</a>

<style>
  .whatsapp-float {
    position: fixed;
    bottom: 1.25rem; /* 20px */
    right: 1.25rem;
    width: 3.25rem; /* 52px */
    height: 3.25rem;
    border-radius: 9999px;

    display: flex;
    align-items: center;
    justify-content: center;

    background-color: #fff;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);

    z-index: 50;
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
  }

  .whatsapp-float:hover {
    transform: scale(1.08);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.25);
  }

  .icon {
    width: 1.6rem;
    height: 1.6rem;
    color: white;
  }

  /* Animación de pulso discreta */
  @keyframes pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.45);
    }
    70% {
      transform: scale(1.06);
      box-shadow: 0 0 0 14px rgba(37, 211, 102, 0);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
    }
  }

  /* Se activa solo por intervalos */
  .pulse {
    animation: pulse 1.4s ease-out;
  }
</style>

<script>
  const button = document.querySelector('.whatsapp-float');

  if (button) {
    setInterval(() => {
      button.classList.add('pulse');

      setTimeout(() => {
        button.classList.remove('pulse');
      }, 1500);
    }, 12000);
  }
</script>
